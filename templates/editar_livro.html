{% extends 'base.html' %}
{% block titulo %}Editar Livro{% endblock %}
{% block conteudo %}
{% with mensagens = get_flashed_messages(with_categories=true) %}
    {% if mensagens %}
        {% for categoria, mensagem in mensagens %}
          <p class="{{ categoria }}">{{ mensagem }}</p>
        {% endfor %}
    {% endif %}
{% endwith %}
<h1>ğŸ“š Editar Livro</h1>

<form method="POST" action="{{ url_for('editar_livro', id=livro.id_livro if livro else 0) }}">
    <input type="hidden" name="autor_nao_existe" value="{{ '1' if autor_nao_existe else '0' }}">
    <input type="hidden" name="autor_nome" value="{{ autor_nome or '' }}">

    TÃ­tulo: <input type="text" name="titulo" value="{{ livro.titulo if livro else '' }}" required><br>
    Autor: <input type="text" name="autor" value="{{ livro.autor if livro else autor_nome or '' }}" required><br>
    ISBN: <input type="text" name="isbn" value="{{ livro.isbn if livro else '' }}"><br>
    Ano publicado: <input type="number" name="ano_publicacao" value="{{ livro.ano_publicacao if livro else '' }}"><br>
    GÃªnero: <input type="text" name="genero" value="{{ livro.genero if livro else '' }}"><br>
    Editora: <input type="text" name="editora" value="{{ livro.editora if livro else '' }}"><br>
    Quantidade disponÃ­vel: <input type="number" name="quantidade_disponivel" value="{{ livro.quantidade_disponivel if livro else '' }}"><br>
    Resumo: <input type="text" name="resumo" value="{{ livro.resumo if livro else '' }}"><br>

    {% if autor_nao_existe %}
        <hr>
        <h3>âš ï¸ Autor nÃ£o encontrado. Cadastre abaixo:</h3>
        Nacionalidade: <input type="text" name="nacionalidade"><br>
        Data de nascimento: <input type="date" name="data_nascimento"><br>
        Biografia: <input type="text" name="biografia"><br>
    {% endif %}

    <button type="submit">Salvar</button>
    <a href="{{ url_for('livros') }}">Cancelar</a>
</form>

{% endblock %}
